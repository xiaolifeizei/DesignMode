## 责任链模式（Chain Of Responsibility）

责任链模式

### 一、说明

责任链模式（Chain Of Responsibility）是一种行为设计模式， 允许你将请求沿着处理者链进行发送。收到请求后， 每个处理者均可对请求进行处理， 或将其传递给链上的下个处理者，其实就是一个链表。可以动态地修改责任链，同时也使得每个责任链上的对象可以专注于自己的问题，这样思路清晰，便于扩展。

### 二、角色

- **抽象处理者（Handler）角色：**

  定义一个处理请求的接口，包含抽象处理方法和一个后继连接。

- **具体处理者（Concrete Handler）角色：**

  实现抽象处理者的处理方法，判断能否处理本次请求，如果可以处理请求则处理，否则将该请求转给它的后继者。

- **客户类（Client）角色：**

  创建处理链，并向链头的具体处理者对象提交请求，它不关心处理细节和请求的传递过程。

### 四、总结

责任链模式很像异常的捕获和处理，当一个问题发生的时候，当前对象看一下自己是否能够处理，不能的话将问题抛给自己的上级去处理，但是要注意这里的上级不一定指的是继承关系的父类，这点和异常的处理是不一样的。所以可以这样说，当问题不能解决的时候，将问题交给另一个对象去处理，就这样一直传递下去直至当前对象找不到下线了，处理结束。在实际应用中，我们都是将解答能力最弱的类放到最前面，然后一点点加强，这样可以使得解答能力比较弱的类有机会去解答。如果让解答能力强的类直接去处理问题，能够处理就不回传给下一个了，当然有的类能力有限，有的类和其他类的能力有重叠部分，当然也有所有类都解决不了的问题。通过责任链，我们可以将问题与处理问题的对象分离出来，**特别适合用于不知道发生的问题到底是什么（有很多选择）但是又必须处理的情况（按照每个选择情况设计相应的处理类）**，这样就弱化了请求问题的人和回答问题的人的关系，如果不得不让发出请求的人知道处理请求的人，这样就不利于代码的复用。

使用场景：

- 多条件流程判断：权限控制
- ERP 系统流程审批：总经理、人事经理、项目经理
- Java 过滤器的底层实现 Filter
